Description: Remove hardcoded GCC optimization flags
 This is necessary in order to make DEB_BUILD_OPTIONS=noopt work as expected.
Author: SÃ©bastien Villemot <sebastien@debian.org>
Forwarded: not-needed
Last-Update: 2012-11-18
---
This patch header follows DEP-3: http://dep.debian.net/deps/dep3/
--- a/Make.inc
+++ b/Make.inc
@@ -106,7 +106,7 @@
 JCFLAGS = -std=gnu99 -pipe $(fPIC) -fno-strict-aliasing -D_FILE_OFFSET_BITS=64
 JCXXFLAGS = -pipe $(fPIC) -fno-rtti
 DEBUGFLAGS = -ggdb3 -DDEBUG
-SHIPFLAGS = -O3 -DNDEBUG -falign-functions
+SHIPFLAGS = -DNDEBUG -falign-functions
 ifneq ($(ARCH), ppc64)
   SHIPFLAGS += -momit-leaf-frame-pointer
 endif
@@ -127,7 +127,7 @@
 endif
 
 FC = $(CROSS_COMPILE)gfortran
-JFFLAGS = -O2 $(fPIC)
+JFFLAGS = $(fPIC)
 CPP = $(CC) -E
 AR := $(CROSS_COMPILE)ar
 AS := $(CROSS_COMPILE)as
--- a/deps/Makefile
+++ b/deps/Makefile
@@ -444,7 +444,7 @@
 
 ## Grisu floating-point printing library ##
 
-GRISU_OPTS = $(CXXFLAGS) -O3 -fvisibility=hidden $(fPIC)
+GRISU_OPTS = $(CXXFLAGS) -fvisibility=hidden $(fPIC)
 
 libgrisu.$(SHLIB_EXT): double_conversion_wrapper.cpp
 	$(CXX) $(GRISU_OPTS) -I/usr/include/double-conversion double_conversion_wrapper.cpp -shared $(LDFLAGS) -o libgrisu.$(SHLIB_EXT) -ldouble-conversion
@@ -527,7 +527,7 @@
 LIBRANDOM_OBJ_TARGET = $(BUILD)/lib/librandom.$(SHLIB_EXT)
 LIBRANDOM_OBJ_SOURCE = random/librandom.$(SHLIB_EXT)
 
-LIBRANDOM_CFLAGS = $(CFLAGS) -O3 -finline-functions -fomit-frame-pointer -DNDEBUG -fno-strict-aliasing \
+LIBRANDOM_CFLAGS = $(CFLAGS) -finline-functions -fomit-frame-pointer -DNDEBUG -fno-strict-aliasing \
 				   --param max-inline-insns-single=1800 -Wmissing-prototypes -Wall  -std=c99 \
 				   -DDSFMT_MEXP=19937 $(fPIC) -shared -DDSFMT_DO_NOT_USE_OLD_NAMES
 ifeq ($(ARCH), x86_64)
@@ -1013,7 +1013,7 @@
 endif
 
 $(BUILD)/lib/libsuitesparse_wrapper.$(SHLIB_EXT): SuiteSparse_wrapper.c
-	$(CC) $(CPPFLAGS) $(CFLAGS) $(LDFLAGS) -O2 -shared $(fPIC) $(SUITESPARSE_INC) SuiteSparse_wrapper.c -o $(BUILD)/lib/libsuitesparse_wrapper.$(SHLIB_EXT) $(SUITESPARSE_LIB)
+	$(CC) $(CPPFLAGS) $(CFLAGS) $(LDFLAGS) -shared $(fPIC) $(SUITESPARSE_INC) SuiteSparse_wrapper.c -o $(BUILD)/lib/libsuitesparse_wrapper.$(SHLIB_EXT) $(SUITESPARSE_LIB)
 	$(INSTALL_NAME_CMD)libsuitesparse_wrapper.$(SHLIB_EXT) $@
 	touch -c $@
 
--- a/deps/openlibm/Make.inc
+++ b/deps/openlibm/Make.inc
@@ -4,12 +4,11 @@
 ARCH = $(shell uname -m)
 
 FC = gfortran
-FFLAGS += -O3
 
 USEGCC = 1
 USECLANG = 0
 
-CFLAGS_add += -std=c99 -Wall -O3 -I$(OPENLIBM_HOME) -I$(OPENLIBM_HOME)/include -I$(OPENLIBM_HOME)/ld80 -I$(OPENLIBM_HOME)/$(ARCH) -I$(OPENLIBM_HOME)/src -DASSEMBLER -D__BSD_VISIBLE -Wno-implicit-function-declaration
+CFLAGS_add += -std=c99 -Wall -I$(OPENLIBM_HOME) -I$(OPENLIBM_HOME)/include -I$(OPENLIBM_HOME)/ld80 -I$(OPENLIBM_HOME)/$(ARCH) -I$(OPENLIBM_HOME)/src -DASSEMBLER -D__BSD_VISIBLE -Wno-implicit-function-declaration
 
 ifeq ($(USECLANG),1)
 USEGCC = 0
--- a/deps/Rmath/Make.inc
+++ b/deps/Rmath/Make.inc
@@ -4,12 +4,11 @@
 ARCH = $(shell uname -m)
 
 FC = gfortran
-FFLAGS += -O3
 
 USEGCC = 1
 USECLANG = 0
 
-CFLAGS += -Wall -O3 
+CFLAGS += -Wall
 
 ifeq ($(USECLANG),1)
 USEGCC = 0
